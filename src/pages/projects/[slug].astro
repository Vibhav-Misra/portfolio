---
import Base from '../../layouts/Base.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const projects = await getCollection('projects');
  return projects.map((project) => ({
    params: { slug: project.slug },
    props: { project },
  }));
}

const { project } = Astro.props;
const { Content } = await project.render();
---
<Base title={`${project.data.title} â€” Project`}>
  <article class="mx-auto max-w-3xl px-4 py-12 prose prose-invert">
    <h1>{project.data.title}</h1>
    <p class="text-slate-300 !mt-0">{project.data.summary}</p>

    <div class="not-prose mt-3 flex flex-wrap gap-2">
      {project.data.tags?.map((t) => <span class="text-xs bg-white/10 px-2 py-0.5 rounded-full">{t}</span>)}
    </div>

    {(project.data.repo || project.data.demo) && (
      <div class="not-prose mt-5 flex gap-2">
        {project.data.repo && (
          <a href={project.data.repo} target="_blank" rel="noopener noreferrer"
             class="rounded-lg border border-white/15 px-3 py-1.5 text-sm bg-white/5 hover:border-white/30">
            GitHub Repo
          </a>
        )}
        {project.data.demo && (
          <a href={project.data.demo} target="_blank" rel="noopener noreferrer"
             class="rounded-lg border border-white/15 px-3 py-1.5 text-sm bg-white/5 hover:border-white/30">
            Live Demo
          </a>
        )}
      </div>
    )}

    <div class="mt-8">
      <Content />
    </div>
  </article>
</Base>

---
const { project } = Astro.props;
const hasRepo = Boolean(project?.data?.repo);
const hasDemo = Boolean(project?.data?.demo);
const dateText = project?.data?.date ? new Date(project.data.date).toLocaleDateString() : "";
---
<article class="relative rounded-2xl border border-white/10 bg-[var(--card)] p-5 hover:border-white/20 transition">
  <!-- Overlay link for whole-card click (no z-index) -->
  <a href={`/projects/${project.slug}`} class="absolute inset-0" aria-label={`Open ${project.data.title}`}></a>

  <div class="flex items-start justify-between gap-4">
    <h3 class="text-lg font-semibold">{project.data.title}</h3>
    <span class="text-xs text-slate-400">{dateText}</span>
  </div>

  <p class="mt-2 text-slate-300">{project.data.summary}</p>

  <div class="mt-3 flex flex-wrap gap-2">
    {project.data.tags?.map((t) => (
      <span class="text-xs bg-white/10 px-2 py-0.5 rounded-full">{t}</span>
    ))}
  </div>

  {(hasRepo || hasDemo) && (
    <div class="mt-4 flex gap-2 relative z-10">
      {hasRepo && (
        <a
          href={project.data.repo}
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center gap-1 text-xs rounded-lg border border-white/15 px-2.5 py-1.5 hover:border-white/30 bg-white/5"
        >
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="14" height="14" fill="currentColor">
            <path d="M12 .5a12 12 0 0 0-3.79 23.4c.6.11.82-.26.82-.58v-2.02c-3.34.73-4.04-1.61-4.04-1.61-.55-1.41-1.35-1.79-1.35-1.79-1.11-.76.08-.74.08-.74 1.23.09 1.88 1.26 1.88 1.26 1.09 1.86 2.86 1.32 3.56 1 .11-.8.42-1.33.76-1.64-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.25-3.22-.13-.31-.54-1.57.12-3.28 0 0 1.01-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.29-1.55 3.3-1.23 3.3-1.23.66 1.71.25 2.97.12 3.28.78.84 1.25 1.91 1.25 3.22 0 4.61-2.8 5.63-5.48 5.93.43.37.81 1.1.81 2.22v3.29c0 .32.22.7.82.58A12 12 0 0 0 12 .5Z"/>
          </svg>
          Repo
        </a>
      )}
      {hasDemo && (
        <a
          href={project.data.demo}
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center gap-1 text-xs rounded-lg border border-white/15 px-2.5 py-1.5 hover:border-white/30 bg-white/5"
        >
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="14" height="14" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.2 2 11.5S6.48 21 12 21s10-4.2 10-9.5S17.52 2 12 2Zm-1.9 6.2c.86 0 1.56.7 1.56 1.56 0 .85-.7 1.55-1.56 1.55s-1.56-.7-1.56-1.55c0-.86.7-1.56 1.56-1.56Zm5.8 0c.86 0 1.56.7 1.56 1.56 0 .85-.7 1.55-1.56 1.55s-1.56-.7-1.56-1.55c0-.86.7-1.56 1.56-1.56Zm.3 5.1c-.92 1.84-2.78 3.45-4.2 3.45s-3.28-1.61-4.2-3.45c-.23-.45.23-.94.72-.74 1.2.5 2.6.79 3.48.79s2.28-.29 3.48-.79c.49-.2.95.29.72.74Z"/>
          </svg>
          Demo
        </a>
      )}
    </div>
  )}
</article>
